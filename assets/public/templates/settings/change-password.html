<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meryl - Change Password</title>
    {% include "components/dependencies.html" %}
    <script src="/static/js/change-password.js" defer></script>
    <style>
        .password-card {
            max-width: 500px;
            margin: 2rem auto;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .password-requirements {
            font-size: 0.875rem;
            color: #6c757d;
            margin-top: 0.5rem;
        }

        .requirement {
            margin-bottom: 0.25rem;
        }

        .requirement.valid {
            color: #28a745;
        }

        .btn-main {
            background-color: var(--main-color);
            border-color: var(--main-color);
            color: white;
        }

        .btn-main:hover {
            background-color: var(--main-color-dark);
            border-color: var(--main-color-dark);
        }

        .btn-secondary {
            background-color: var(--main-color-subtle);
            border-color: var(--main-color-subtle);
            color: white;
        }

        .btn-secondary:hover {
            background-color: var(--main-color-dark);
            border-color: var(--main-color-dark);
        }
    </style>
</head>

<body class="bg-body-tertiary min-vh-100">
    {% include "components/navbar.html" with context %}

    <div class="container-fluid row">

        {% include "components/settings-sidebar.html" with context %}

        <div class="col">
            <div class="container-fluid">
                <div class="row justify-content-center">
                    <div class="col-12 col-md-8 col-lg-6">
                        <div class="card password-card">
                            <div class="card-body">
                                <div class="text-center mb-4">
                                    <i class="fa-solid fa-key fa-3x text-main-color mb-3"></i>
                                    <h2 class="card-title">Change Password</h2>
                                    <p class="text-muted">Choose a strong password to keep your account secure</p>
                                </div>

                                <form id="password-form">
                                    <input type="hidden" name="user_id" value="{{ user_id }}">
                                    <div class="form-group">
                                        <label for="current-password" class="form-label">Current Password</label>
                                        <div class="input-group">
                                            <input type="password" class="form-control" id="current-password"
                                                name="old_password" required>
                                            <button type="button" class="btn btn-outline-secondary toggle-password" data-target="current-password">
                                                <i class="fa-solid fa-eye"></i>
                                            </button>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="new-password" class="form-label">New Password</label>
                                        <div class="input-group">
                                            <input type="password" class="form-control" id="new-password"
                                                name="password" required>
                                            <button type="button" class="btn btn-outline-secondary toggle-password" data-target="new-password">
                                                <i class="fa-solid fa-eye"></i>
                                            </button>
                                        </div>
                                        <div class="password-requirements" id="password-requirements">
                                            <div class="requirement" id="req-length">
                                                <i class="fa-solid fa-circle" id="icon-length"></i>
                                                At least 8 characters
                                            </div>
                                            <div class="requirement" id="req-uppercase">
                                                <i class="fa-solid fa-circle" id="icon-uppercase"></i>
                                                At least one uppercase letter
                                            </div>
                                            <div class="requirement" id="req-lowercase">
                                                <i class="fa-solid fa-circle" id="icon-lowercase"></i>
                                                At least one lowercase letter
                                            </div>
                                            <div class="requirement" id="req-number">
                                                <i class="fa-solid fa-circle" id="icon-number"></i>
                                                At least one number
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="confirm-password" class="form-label">Confirm New Password</label>
                                        <div class="input-group">
                                            <input type="password" class="form-control" id="confirm-password"
                                                name="confirm_password" required>
                                            <button type="button" class="btn btn-outline-secondary toggle-password" data-target="confirm-password">
                                                <i class="fa-solid fa-eye"></i>
                                            </button>
                                        </div>
                                        <div class="form-text" id="password-match-text"></div>
                                    </div>

                                    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                                        <a href="/settings/profile" class="btn btn-secondary me-md-2">
                                            <i class="fa-solid fa-arrow-left"></i> Back to Profile
                                        </a>
                                        <button type="submit" class="btn btn-main" id="change-password-btn" disabled>
                                            <i class="fa-solid fa-key"></i> Change Password
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            {% include "components/toasts.html" %}


</body>

</html>
